{% extends 'dashboard/base.html' %}

{% block content %}
<div class="dashboard-container">
    <div class="row">
        <div class="col-md-12 mb-4">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0"><i class="fas fa-file-code me-2"></i>Haftalık Rapor</h5>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>Bu sayfa geliştirme aşamasındadır. Haftalık rapor sonuçları yakında burada gösterilecektir.
                    </div>
                    
                    <div class="row mb-4">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="weekPicker" class="form-label">Hafta Seçimi</label>
                                <div class="input-group">
                                    <input type="week" class="form-control" id="weekPicker" value="2023-W33">
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="reportFormat" class="form-label">Rapor Formatı</label>
                                <select class="form-select" id="reportFormat">
                                    <option value="html">HTML</option>
                                    <option value="pdf">PDF</option>
                                    <option value="csv">CSV</option>
                                    <option value="json">JSON</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-4 d-flex align-items-end">
                            <button class="btn btn-primary w-100">
                                <i class="fas fa-sync-alt me-2"></i>Raporu Oluştur
                            </button>
                        </div>
                    </div>
                    
                    <div class="row mb-4">
                        <div class="col-md-3 mb-4">
                            <div class="card h-100">
                                <div class="card-body text-center">
                                    <h3 class="text-primary mb-2">15,320</h3>
                                    <p class="text-muted mb-0">Toplam İstek</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="card h-100">
                                <div class="card-body text-center">
                                    <h3 class="text-danger mb-2">205</h3>
                                    <p class="text-muted mb-0">Tespit Edilen Anomaliler</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="card h-100">
                                <div class="card-body text-center">
                                    <h3 class="text-warning mb-2">1.3%</h3>
                                    <p class="text-muted mb-0">Anomali Oranı</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="card h-100">
                                <div class="card-body text-center">
                                    <h3 class="text-success mb-2">98.7%</h3>
                                    <p class="text-muted mb-0">Normal Trafik</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h6 class="card-title mb-0">Günlük Trafik</h6>
                                </div>
                                <div class="card-body">
                                    <canvas id="dailyTraffic" height="250"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h6 class="card-title mb-0">Anomali Dağılımı</h6>
                                </div>
                                <div class="card-body">
                                    <canvas id="anomalyDistribution" height="250"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mt-2">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="card-title mb-0">Günlük Anomali Özeti</h6>
                                </div>
                                <div class="card-body">
                                    <table class="table table-sm table-hover table-striped">
                                        <thead>
                                            <tr>
                                                <th>Tarih</th>
                                                <th>Toplam İstek</th>
                                                <th>Anomaliler</th>
                                                <th>Oran</th>
                                                <th>En Sık Görülen Anomali</th>
                                                <th>Durum</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Pazartesi, 14 Ağustos</td>
                                                <td>2,158</td>
                                                <td>32</td>
                                                <td>1.48%</td>
                                                <td>SQL Injection</td>
                                                <td><span class="badge bg-warning">Orta</span></td>
                                            </tr>
                                            <tr>
                                                <td>Salı, 15 Ağustos</td>
                                                <td>2,458</td>
                                                <td>37</td>
                                                <td>1.50%</td>
                                                <td>XSS</td>
                                                <td><span class="badge bg-warning">Orta</span></td>
                                            </tr>
                                            <tr>
                                                <td>Çarşamba, 16 Ağustos</td>
                                                <td>2,310</td>
                                                <td>25</td>
                                                <td>1.08%</td>
                                                <td>Path Traversal</td>
                                                <td><span class="badge bg-success">Düşük</span></td>
                                            </tr>
                                            <tr>
                                                <td>Perşembe, 17 Ağustos</td>
                                                <td>2,504</td>
                                                <td>29</td>
                                                <td>1.16%</td>
                                                <td>SQL Injection</td>
                                                <td><span class="badge bg-success">Düşük</span></td>
                                            </tr>
                                            <tr>
                                                <td>Cuma, 18 Ağustos</td>
                                                <td>2,689</td>
                                                <td>43</td>
                                                <td>1.60%</td>
                                                <td>XSS</td>
                                                <td><span class="badge bg-danger">Yüksek</span></td>
                                            </tr>
                                            <tr>
                                                <td>Cumartesi, 19 Ağustos</td>
                                                <td>1,890</td>
                                                <td>22</td>
                                                <td>1.16%</td>
                                                <td>Aşırı İstek</td>
                                                <td><span class="badge bg-success">Düşük</span></td>
                                            </tr>
                                            <tr>
                                                <td>Pazar, 20 Ağustos</td>
                                                <td>1,311</td>
                                                <td>17</td>
                                                <td>1.30%</td>
                                                <td>Path Traversal</td>
                                                <td><span class="badge bg-success">Düşük</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Günlük Trafik grafiği
        const trafficCtx = document.getElementById('dailyTraffic').getContext('2d');
        new Chart(trafficCtx, {
            type: 'bar',
            data: {
                labels: ['Pazartesi', 'Salı', 'Çarşamba', 'Perşembe', 'Cuma', 'Cumartesi', 'Pazar'],
                datasets: [{
                    label: 'Trafik',
                    data: [2158, 2458, 2310, 2504, 2689, 1890, 1311],
                    backgroundColor: '#0f62fe'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
        
        // Anomali Dağılımı grafiği
        const anomalyCtx = document.getElementById('anomalyDistribution').getContext('2d');
        new Chart(anomalyCtx, {
            type: 'line',
            data: {
                labels: ['Pazartesi', 'Salı', 'Çarşamba', 'Perşembe', 'Cuma', 'Cumartesi', 'Pazar'],
                datasets: [{
                    label: 'Anomaliler',
                    data: [32, 37, 25, 29, 43, 22, 17],
                    borderColor: '#da1e28',
                    backgroundColor: 'rgba(218, 30, 40, 0.1)',
                    fill: true,
                    tension: 0.4,
                    borderWidth: 2,
                    pointRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    });
</script>
{% endblock %} 